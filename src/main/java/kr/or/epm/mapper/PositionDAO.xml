<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.epm.DAO.PositionDAO">
	
<!--
	작성일 : 2016-11-20
	작성자 : 백승아
	사용 목적 : 직위에 대한 mapper
-->

	<!-- 직위 등록하기 -->
	<insert id="insertPosition">
		insert into position(position_no, position_name, step)
		values(position_seq.nextval, #{position_name}, #{step})
	</insert>
	
	<!-- 직위 수정하기 -->
	<update id="updatePosition">
		update position
		set position_name = #{position_name}, 
			step = #{step}
		where position_no = #{position_no}
	</update>
	
	<!-- 직위 조회하기 -->
	<select id="selectPosition" resultType="kr.or.epm.VO.Position">
		select position_name,position_no,step
		from position
		order by step asc
	</select>
	
	<!-- 직위 상세 조회하기 -->
	<select id="selectPosition_detail" resultType="kr.or.epm.VO.Position">
		select position_no, position_name, step
		from position
		where position_no = #{position_no}
	</select>
	
	<!-- 직위 삭제하기 -->
	<delete id="deletePosition">
		delete from position
		where position_no = #{position_no}
	</delete>
	
	<!--직위 선택시 기본급여 , 추가급여 조회-->
	<select id="selectOptionJoin" parameterType="String" resultType="kr.or.epm.VO.PositionJoin">
	select p.position_no, p.position_name, p.step, s.basic_pay, a.add_pay
	from position p join set_pay s
	on p.position_no = s.position_no
	join set_add_pay a
	on p.position_no=a.position_no
	where p.position_no = #{param1}
	</select>
	
	
</mapper>