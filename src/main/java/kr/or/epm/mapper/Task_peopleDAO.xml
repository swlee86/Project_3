<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.epm.DAO.Task_peopleDAO">

<!--
	작성일 : 2016-11-20
	작성자 : 백승아
	사용 목적 : 업무 참여자에 대한 mapper
-->

	<select id="selectTask_No" resultType="String">
			select max(task_no) from task_people
	</select>

	<!-- 업무 참여자 추가하기 -->
	<insert id="insertTask_people" parameterType="kr.or.epm.VO.Task_people">
		insert into task_people(task_no, emp_no)
		values(#{task_no}, #{emp_no})
	</insert>
	
	<!-- 업무 참여자 삭제하기 -->
	<delete id="deleteTask_people">
		delete from task_people
		where task_no = #{task_no} and
			  emp_no = #{emp_no}
	</delete>
	
	<!-- 업무 참여자 조회하기 -->
	<!-- A사원이 어떤 업무에 참여했나를 조회할 경우 -->
	<select id="selectTask_people" resultType="kr.or.epm.VO.Task_people">
		select task_no, t.emp_no, e.emp_name
		from task_people t join emp e
		on t.emp_no = e.emp_no
		where task_no = #{task_no}
		order by emp_no asc
	</select>
	
</mapper>