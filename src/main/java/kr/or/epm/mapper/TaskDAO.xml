<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.epm.DAO.TaskDAO">

	<!-- 업무 요청 수신함 확인하기 / 보낸 날짜가 최신인 것부터 -->
	<select id="selectTask" resultType="kr.or.epm.VO.Task">
		select task_no, cg_name, sign, 
			   task_name, deadline, content, 
			   rec_emp_no, rec_name, rec_date,
			   emp_no, emp_name, send_date, 
			   file_name, task_step_no, step_no
		from task t join task_cg c
		on t.cg_no = c.cg_no
		where rec_emp_no = #{emp_no} and 
			  rec_del_check = '0' and 
			  t.cg_no = '1'
		order by send_date desc;
	</select>
	
	<!-- 업무 상세 조회하기 -->
	<select id="selectTask_detail" resultType="kr.or.epm.VO.Task">
		select task_no, cg_name, sign, 
			   task_name, deadline, content, 
			   rec_emp_no, rec_name, rec_date, 
			   emp_no, emp_name, send_date, 
			   file_name, task_step_no, step_no
		from task t join task_cg c
		on t.cg_no = c.cg_no
		where task_no = #{task_no};
	</select>

</mapper>