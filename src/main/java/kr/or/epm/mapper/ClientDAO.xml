<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.epm.DAO.ClientDAO">

	<!-- 거래처 조회하기 -->
	<select id="selectClient" resultType="kr.or.epm.VO.Client">
		select client_no, name, addr,
			   tel, c.emp_no, e.emp_name
		from client c join emp e
    	on c.emp_no = e.emp_no
		order by name asc
	</select>
	
	<!-- 거래처 등록하기 -->
	<insert id="insertClient">
		insert into client(client_no, name, addr, 
						   addr_detail, postcode, fax, 
						   tel, memo, emp_no)
		values(client_seq.nextval, #{name}, #{addr}, 
			   #{addr_detail}, #{postcode}, #{fax}, 
			   #{tel}, #{memo}, #{emp_no})
	</insert>
	
	<!-- 거래처 수정하기 -->
	<update id="updateClient">
		update client
		set client_no = #{client_no}, 
   			name = #{name}, 
   			addr = #{addr}, 
   			addr_detail = #{addr_detail}, 
   			postcode = #{postcode}, 
   			fax = #{fax}, 
   			tel = #{tel}, 
   			memo = #{memo}, 
   			emp_no = #{emp_no}
   		where client_no = #{client_no}
	</update>
	
	<!-- 거래처 상세보기 -->
	<select id="selectClient_detail" resultType="kr.or.epm.VO.Client">
		select client_no, name, addr, 
			   addr_detail, postcode, fax, 
			   tel, memo, c.emp_no, e.emp_name
		from client c join emp e
    	on c.emp_no = e.emp_no
		where client_no = #{client_no}
	</select>
	
	<!-- 거래처 삭제하기 -->
	<delete id="deleteClient">
		delete from client
		where client_no = #{client_no}
	</delete>
	
</mapper>