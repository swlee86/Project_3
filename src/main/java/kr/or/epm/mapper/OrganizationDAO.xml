<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.epm.DAO.ApprovalDAO">

<!--
	작성일 : 2016-11-20
	작성자 : 백승아
	사용 목적 : 조직도에 대한 mapper
-->

	<!-- 조직도 출력하기 -->
	<select id="selectOrganization">
		select b.branch_name, b.depth, d.dept_name, d.depth, l.low_dept_name, l.depth, e.emp_no, e.emp_name
		from (select branch_no, branch_name, depth
      		  from branch
      		  where his_check = '1') b join (select dept_no, branch_no, dept_name, depth
                                     		 from dept
                                     		 where his_check = '1') d
	    on b.branch_no = d.branch_no
		join (select low_dept_no, dept_no, low_dept_name, depth
      		  from low_dept
      		  where his_check = '1') l
		on d.dept_no = l.dept_no
		join emp e
		on l.low_dept_no = e.low_dept_no
	</select>
	
</mapper>